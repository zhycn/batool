---
// 分类过滤器组件 - 响应式布局
// - 移动端：单行横向滚动
// - PC端：自动换行多行展示
interface Props {
  categoryList: [string, number][];
  totalCount: number;
}

const { categoryList, totalCount } = Astro.props;
---

<div class="bg-base-100 border-base-content/5 border-t border-b py-4">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <!-- 移动端：横向滚动容器 -->
    <div class="w-full overflow-x-auto overflow-y-hidden md:hidden">
      <div class="flex min-w-max justify-start gap-2">
        <!-- 全部按钮 -->
        <button
          data-category="all"
          class="category-btn bg-primary text-primary-content hover:bg-primary/90 rounded-full border border-transparent px-4 py-2 text-sm font-medium transition-all duration-200"
        >
          全部 <span class="ml-1.5 opacity-70">({totalCount})</span>
        </button>

        <!-- 分类按钮列表 -->
        {
          categoryList.map(([cat, count]) => (
            <button
              data-category={cat}
              class="category-btn bg-base-content/5 text-base-content/70 hover:bg-base-content/10 hover:text-base-content border-base-content/10 rounded-full border px-4 py-2 text-sm font-medium transition-all duration-200"
            >
              {cat} <span class="ml-1.5 opacity-50">({count})</span>
            </button>
          ))
        }
      </div>
    </div>

    <!-- PC端：自动换行多行展示 -->
    <div class="hidden w-full md:block">
      <div class="flex flex-wrap justify-center gap-2 sm:gap-2.5">
        <!-- 全部按钮 -->
        <button
          data-category="all"
          class="category-btn bg-primary text-primary-content hover:bg-primary/90 rounded-full border border-transparent px-4 py-2 text-sm font-medium transition-all duration-200"
        >
          全部 <span class="ml-1.5 opacity-70">({totalCount})</span>
        </button>

        <!-- 分类按钮列表 -->
        {
          categoryList.map(([cat, count]) => (
            <button
              data-category={cat}
              class="category-btn bg-base-content/5 text-base-content/70 hover:bg-base-content/10 hover:text-base-content border-base-content/10 rounded-full border px-4 py-2 text-sm font-medium transition-all duration-200"
            >
              {cat} <span class="ml-1.5 opacity-50">({count})</span>
            </button>
          ))
        }
      </div>
    </div>
  </div>
</div>

<style>
  /* 隐藏移动端滚动条但保持可滚动 - 必要的自定义样式 */
  .overflow-x-auto {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .overflow-x-auto::-webkit-scrollbar {
    display: none;
  }
</style>
